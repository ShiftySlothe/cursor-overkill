---
description: 
globs: 
alwaysApply: false
---
# Epic, Sprint, and Task Planning

Your primary responsibility is to translate an approved Technical Design Proposal (TDP) into a hierarchical set of plans: an epics plan, sprint plans, and detailed role-specific task lists for Backend (BE-AI) and Frontend (FE-AI) engineers. This process must adhere to @planning_principles.

**Overall Planning Workflow:**

1.  **Input Review:**
    *   Thoroughly review the approved Technical Design Proposal (TDP) located in `tasks/proposals/`.
    *   Reference `docs/product_requirement_docs.md` for user stories and acceptance criteria.
    *   Consult `docs/architecture.md` and `docs/technical.md` for context.

2.  **Identify Reusable Code:**
    *   Analyze `src/lib/`, `src/server/services/` (for BE tasks), `src/components/`, `src/app/_components/` (for FE tasks, or equivalent paths defined in @directory_structure for the project's stack) for existing utility functions, services, or UI components that can be reused or adapted for the tasks derived from the TDP.
    *   Document any identified reusable assets and explicitly mention them in the relevant task descriptions for the IE-AIs.
    *   Present this list of potential reusable assets to the user for confirmation and guidance. The user may point out other relevant existing code.

3.  **Update `tasks/epics_plan.md` (if necessary):**
    *   Identify or define high-level Epics based on the TDP and PRD.
    *   Ensure each Epic has a clear goal and links to relevant PRD sections.
    *   Update epic statuses as development progresses.

4.  **Sprint Planning - Create `tasks/sprints/sprint_[YYYY-MM-DD]_[sprint_goal_identifier].md`:**
    *   Define a clear Sprint Goal based on the TDP and which Epics/User Stories can be tackled.
    *   Create a new sprint plan file using naming conventions from @file_naming (e.g., `tasks/sprints/sprint_2023-11-15_user-auth-mvp.md`).
    *   **Contents of Sprint Plan:**
        *   Sprint Goal.
        *   Linked Epics.
        *   Planned User Stories.
        *   High-Level Task Overview & Dependencies (including references to reusable code identified in step 2).
        *   QA (Manual) Tasks.
        *   Branch Setup Task (referencing @git_workflow).
        *   Documentation Update Task (Post-Merge, referencing @documentation_update).

5.  **Detailed Role-Specific Task List Generation:**
    *   Based on the `tasks/sprints/sprint_[...].md` file, create/update (following @file_naming):
        *   `tasks/sprints/sprint_[...]/be_tasks.md`
        *   `tasks/sprints/sprint_[...]/fe_tasks.md`
    *   **Decomposition:** Break down high-level tasks, **explicitly noting any reusable components/utilities identified in step 2 within the task descriptions.**
    *   **Task Attributes (for each task):**
        *   Unique Task ID.
        *   Description (mention reusable assets here).
        *   Assigned Role.
        *   Dependencies.
        *   Status.
        *   Deliverables.
        *   Acceptance Criteria (Task-Level).
        *   Unit Test Requirement (referencing @tdd).
        *   Definition of Done (DoD).

6.  **Review and User Guidance:**
    *   Present the draft sprint plan, the identified reusable assets, and the derived role-specific task lists to the user for review and approval.
    *   The user will confirm the identified reusable code or suggest alternatives.
    *   If task breakdown, dependency mapping, or role assignments are complex or have ambiguities, **seek user guidance**.

**Definition of Done for Planning Phase:**
*   `tasks/epics_plan.md` is up-to-date.
*   A new `tasks/sprints/sprint_[...].md` file is created and approved.
*   Identified reusable code assets are documented and confirmed by the user.
*   Corresponding `be_tasks.md` and `fe_tasks.md` are complete, with tasks properly defined (referencing reusable assets) and dependencies mapped.
*   The plan has been reviewed and approved by the user.
*   `tasks/active_context.md` has been updated for the current sprint as per @active_context_management.
*   Inform the user that planning is complete.